<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EHCB Cardio App v4</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 1rem; background: #f5f5f5; }
    h1 { color: #b30000; }
    select, button { font-size: 1rem; padding: 0.6rem 1rem; margin: 0.5rem; }
    .hidden { display: none; }
    .phase { font-size: 1.2rem; margin-top: 1rem; }
    .info { font-size: 0.9rem; margin-bottom: 0.3rem; color: #333; }
    .timer { font-size: 2rem; margin: 1rem 0; }
    .progress { width: 80%; height: 20px; background: #ddd; margin: 1rem auto; border-radius: 10px; overflow: hidden; }
    .bar { height: 100%; background: #b30000; width: 0%; transition: width 1s linear; }
    img.logo { width: 100px; margin-bottom: 1rem; }
  </style>
</head>
<body>
  <img src="logo.png" alt="EHCB Logo" class="logo">
  <h1>EHCB Cardio App v4</h1>
  <p>Wähle ein Programm:</p>
  <select id="program">
    <option value="kraft">Kraftausdauer</option>
    <option value="anaerob">Anaerob</option>
    <option value="vo2">VO₂max</option>
    <option value="regen">Regeneration</option>
    <option value="hiit">HIIT</option>
    <option value="grund">Grundkondition</option>
  </select>
  <button onclick="confirmProgram()">Programm bestätigen</button>

  <div id="trainingUI" class="hidden">
    <div class="phase" id="phaseName">Bereit</div>
    <div class="info" id="rpm">RPM: –</div>
    <div class="info" id="intensity">Intensität: –</div>
    <div class="timer" id="time">00:00</div>
    <div class="progress"><div class="bar" id="bar"></div></div>
    <div>
      <button onclick="start()">Start</button>
      <button onclick="pause()">Pause</button>
      <button onclick="reset()">Reset</button>
    </div>
  </div>

<script>
const defaults = {
  warmup:   { rpm: "80–90",   intensity: "60–65 %" },
  sprint:   { rpm: "100–120", intensity: "90–100 %" },
  pause:    { rpm: "60–70",   intensity: "50–60 %" },
  main:     { rpm: "80–100",  intensity: "70–80 %" },
  change:   { rpm: "90–100",  intensity: "70–85 %" },
  cooldown: { rpm: "70–80",   intensity: "50–60 %" }
};

function phaseInfo(name) {
  const n = name.toLowerCase();
  if (n.includes("sprint") || n.includes("intervall")) return defaults.sprint;
  if (n.includes("pause") || n.includes("erholung")) return defaults.pause;
  if (n.includes("warm"))        return defaults.warmup;
  if (n.includes("hauptteil"))  return defaults.main;
  if (n.includes("wechsel"))      return defaults.change;
  if (n.includes("cool"))         return defaults.cooldown;
  return { rpm: "–", intensity: "–" };
}

const programmes = {
  kraft: [
    { name: "Aufwärmen 1", time: 180 }, { name: "Aufwärmen 2", time: 180 },
    { name: "Aufwärmen 3", time: 120 }, { name: "Antritte", time: 120 },
    { name: "Intervall: Sitzen", time: 180 }, { name: "Intervall: Stehen", time: 180 },
    { name: "Erholung", time: 120 }, { name: "Cool-Down", time: 180 }
  ],
  anaerob: [
    { name: "Aufwärmen", time: 180 },
    ...Array.from({ length: 8 }, (_, i) => [
      { name: `Sprint ${i+1}`, time: 20 }, { name: `Pause ${i+1}`, time: 10 }
    ]).flat(),
    { name: "Cool-Down", time: 180 }
  ],
  vo2: [
    { name: "Aufwärmen", time: 180 },
    ...Array.from({ length: 3 }, (_, i) => [
      { name: `Intervall ${i+1}`, time: 240 }, { name: `Pause ${i+1}`, time: 180 }
    ]).flat(),
    { name: "Intervall 4", time: 240 }, { name: "Cool-Down", time: 180 }
  ],
  regen: [
    { name: "Locker fahren", time: 240 }, { name: "Frequenz steigern", time: 120 },
    { name: "Widerstand leicht", time: 180 }, { name: "Locker fahren", time: 240 },
    { name: "Cool-Down", time: 180 }
  ],
  hiit: [
    { name: "Aufwärmen", time: 600 },
    ...Array.from({ length: 10 }, (_, i) => [
      { name: `Intervall ${i+1}`, time: 45 }, { name: `Pause ${i+1}`, time: 60 }
    ]).flat(),
    { name: "Cool-Down", time: 600 }
  ],
  grund: [
    { name: "Warm-Up (sitzend)", time: 600 }, { name: "Hauptteil (sitzend)", time: 2400 },
    { name: "Wechsel stehend/sitzend", time: 900 }, { name: "Sitzen", time: 900 },
    { name: "Cool-Down", time: 600 }
  ]
};

let plan = [], current = 0, secs = 0, timer;

function confirmProgram() {
  plan = programmes[document.getElementById("program").value];
  current = 0; secs = plan[0].time;
  document.getElementById("phaseName").innerText = plan[0].name;
  updatePhaseInfo(plan[0].name);
  document.getElementById("trainingUI").classList.remove("hidden");
  update();
}

function updatePhaseInfo(name) {
  const info = phaseInfo(name);
  document.getElementById("rpm").innerText = "RPM: " + info.rpm;
  document.getElementById("intensity").innerText = "Intensität: " + info.intensity;
}

function start() {
  clearInterval(timer);
  timer = setInterval(() => {
    if (secs > 0) { secs--; update(); }
    else if (++current < plan.length) {
      secs = plan[current].time;
      document.getElementById("phaseName").innerText = plan[current].name;
      updatePhaseInfo(plan[current].name);
      update();
    } else { clearInterval(timer); }
  }, 1000);
}

function pause() { clearInterval(timer); }

function reset() { clearInterval(timer); confirmProgram(); }

function update() {
  const m = String(Math.floor(secs / 60)).padStart(2, '0');
  const s = String(secs % 60).padStart(2, '0');
  document.getElementById("time").innerText = m + ":" + s;
  document.getElementById("bar").style.width = (100 - Math.floor((secs / plan[current].time) * 100)) + "%";
}
</script>
</body>
</html>

